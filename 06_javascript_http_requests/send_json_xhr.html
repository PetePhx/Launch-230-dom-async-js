<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Send JSON via XHR</title>
    <meta charset="utf-8" />
    <!-- <link rel="stylesheet" href="_.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="javascripts/handlebars-v4.0.12.js"></script>
    <script src="_.js"></script> -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        var request = new XMLHttpRequest();
        request.open('POST', 'https://ls-230-web-store-demo.herokuapp.com/v1/products');
        request.setRequestHeader('Authorization', 'token AUTH_TOKEN');
        request.setRequestHeader('Content-Type', 'application/json');

        var data = {
          name: 'Smith & Wesson Model 500',
          sku: 'S&W500',
          price: 136900,
        };

        var jsonData = JSON.stringify(data);

        request.addEventListener('load', function (e) {
          document.getElementById("reponse-text").innerHTML = '<pre>' + request.responseText + '</pre>';
        });

        request.send(jsonData)
      });
    </script>
  </head>
  <body>
    <h1>Problems</h1>
    <ol>
      <li>
        Write out the raw text of the HTTP request the last example above will send to the server.
      </li>
      <p>
        <pre>
  POST /books HTTP/1.1
  Host: ls-230-book-catalog.herokuapp.com
  User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:62.0) Gecko/20100101 Firefox/62.0
  Accept: */*
  Accept-Language: en-US,en;q=0.5
  Accept-Encoding: gzip, deflate
  Content-Type: application/json
  Content-Length: 51
  Origin: null
  Connection: keep-alive

  {"title": "Programming Ruby", "author": "Dave Thomas"}
       </pre>
      </p>

      <li>
        Write some JavaScript to create a new product by sending a request to the JSON API on our web store. To create a product, make a POST request to https://ls-230-web-store-demo.herokuapp.com/v1/products. You can find out the required parameters by viewing the API documentation.
      </li>
      <p id="reponse-text">
      </p>
    </ol>
  </body>
</html>
